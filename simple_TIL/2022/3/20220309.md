# TIL Í∞ÑÎã®ÌöåÍ≥†

# Today I Learned

- [x] React (10:00 ~ 1: 25 )
- [x] ÌîÑÎ°úÍ∑∏ÎûòÎ®∏Ïä§ Í≥ºÏ†ú ÌíÄÏù¥ (1:35 ~ 4:30)
- [x] ÏïåÍ≥†Î¶¨Ï¶ò

---

# üìπ ÎèôÏòÅÏÉÅ

[![section13](../../img/Ïç∏ÎÑ§Ïùº/TIL.png)](https://youtu.be/I3TRYDUkpAo)

# React : Í≥†Í∏â Î¶¨ÎçïÏä§

# Î¶¨ÎçïÏä§ Î≥µÏäµ

## Store ÎßåÎì§Í∏∞

```jsx
// index.js
import { configureStore } from "@reduxjs/toolkit";

import uiSlice from "./ui-slice";
import cartSlice from "./cart-slice";

const store = configureStore({
  reducer: { ui: uiSlice.reducer, cart: cartSlice.reducer },
});

export default store;
```

```jsx
// cart-slice.js
import { createSlice } from "@reduxjs/toolkit";

const cartSlice = createSlice({
  name: "cart",
  initialState: {
    items: [], // Ïó¨Îü¨ ÏïÑÏù¥ÌÖúÏù¥ Îã¥Í∏∏ Î∞∞Ïó¥
    totalQuantity: 0,
  },
  reducers: {
    addItemToCart(state, action) {
      const newItem = action.payload; // ÏÉàÎ°úÏö¥ ÏïÑÏù¥ÌÖúÏù¥ payloadÎ°ú (Ïñ¥Îñ§Í≤å Îì§Ïñ¥Ïò¨ÏßÄ Î™®Î•¥Îãà)

      // Ïù¥ÎØ∏ Ï°¥Ïû¨ÌïòÎäî ÏïÑÏù¥ÌÖúÏù∏Í≤ΩÏö∞, Ìï¥Îãπ ÏïÑÏù¥ÌÖúÏùÑ Ï∞æÏïÑÏ§ÄÎã§ (booleanÍ∞íÏúºÎ°ú ÎÇòÏò¥)
      const existingItem = state.items.find((item) => item.id === newItem.id);
      state.totalQuantity++; // ÏùºÎã® Ï†ÑÏ≤¥ ÏàòÎüâ (Ïû•Î∞îÍµ¨ÎãàÏóê ÏûàÎäî itemsÏùò ÏàòÎüâ)ÏùÑ Ï±ÑÏõåÏ£ºÏûê

      if (!existingItem) {
        // Ïù¥ÎØ∏ ÏûàÏßÄ ÏïäÎã§Î©¥?, Í∑∏ÎåÄÎ°ú items Î∞∞Ïó¥Ïóê Ï∂îÍ∞ÄÌïòÏûê

        // redux toolkitÏóêÎäî Í∏∞Î≥∏Ï†ÅÏúºÎ°ú immer Ï†ÅÏö©ÎêòÏñ¥ ÏûàÍ∏∞ ÎïåÎ¨∏Ïóê pushÎ°ú Ìï¥ÎèÑ Í¥úÏ∞ÆÎã§
        state.items.push({
          // itemÏóê Îì§Ïñ¥Í∞à propoertyÎì§
          id: newItem.id,
          price: newItem.price,
          quantity: 1,
          totalPrice: newItem.price,
          name: newItem.title,
        });
      } else {
        // Ï°¥Ïû¨ÌïòÎ©¥, Ìï¥Îãπ itemÏùò ÏàòÎüâÏùÑ ÎäòÎ†§Ï£ºÍ≥†
        existingItem.quantity++;
        // priceÎèÑ Ïò¨Î†§Ï£ºÏûê
        existingItem.totalPrice = existingItem.totalPrice + newItem.price;
      }
    },
    removeItemFromCart(state, action) {
      const id = action.payload;
      const existingItem = state.items.find((item) => item.id === id);
      state.totalQuantity--;

      // Ïù¥ÎØ∏ ÏûàÏúºÎãà, ÏßÄÏö¥Îã§Îäî Îúª, 1Í∞ú ÎÇ®ÏùÑÎïåÎäî Ìï¥Îãπ itmeÏùÑ filterÎ°ú ÏÇ≠Ï†ú
      // Í∑∏ Ï†ÑÍπåÏßÄÎäî Í≥ÑÏÜç Ï§ÑÏó¨ÎÇòÍ∞ÑÎã§
      if (existingItem.quantity === 1) {
        state.items = state.items.filter((item) => item.id !== id);
      } else {
        existingItem.quantity--;
      }
    },
  },
});

export const cartActions = cartSlice.actions;

export default cartSlice;
```

```jsx
// ui-slice.js

import { createSlice } from "@reduxjs/toolkit";

const uiSlice = createSlice({
  name: "ui",
  initialState: { cartIsVisible: false },
  reducers: {
    toggle(state) {
      state.cartIsVisible = !state.cartIsVisible;
    },
  },
});

export const uiActions = uiSlice.actions;

export default uiSlice;
```

### store Íµ¨ÎèÖÌïòÍ∏∞

```jsx
// index.js
import ReactDOM from "react-dom";
import { Provider } from "react-redux";

import store from "./store/index";
import "./index.css";
import App from "./App";

ReactDOM.render(
  <Provider store={store}>
    <App />
  </Provider>,
  document.getElementById("root")
);
```

### cartÍ∞Ä ÌÜ†Í∏ÄÌï†ÎïåÎßå Î≥¥Ïó¨ÏßÄÍ≤å ÌïòÍ∏∞

```jsx
// App.js
import { useSelector } from 'react-redux';

import Cart from './components/Cart/Cart';
import Layout from './components/Layout/Layout';
import Products from './components/Shop/Products';

function App() {
  const showCart = useSelector((state) => state.ui.cartIsVisible);

  return (
    <Layout>
      {showCart && <Cart />}
      <Products />
    </Layout>
  );
}

export default App;

// CartButton.js
import { useDispatch, useSelector } from 'react-redux';

import { uiActions } from '../../store/ui-slice';
import classes from './CartButton.module.css';

const CartButton = (props) => {
  const dispatch = useDispatch();
  const cartQuantity = useSelector((state) => state.cart.totalQuantity);

  const toggleCartHandler = () => {
    dispatch(uiActions.toggle());
  };

  return (
    <button className={classes.button} onClick={toggleCartHandler}>
      <span>My Cart</span>
      <span className={classes.badge}>{cartQuantity}</span>
    </button>
  );
};

export default CartButton;
```

### 4. cart ÏïÑÏù¥ÌÖúÏù¥ ÎèôÏ†ÅÏúºÎ°ú Î≥ÄÍ≤ΩÎêòÍ≤å ÌïòÍ∏∞

```jsx
// Cart.js
import { useSelector } from "react-redux";

import Card from "../UI/Card";
import classes from "./Cart.module.css";
import CartItem from "./CartItem";

const Cart = (props) => {
  const cartItems = useSelector((state) => state.cart.items);

  return (
    <Card className={classes.cart}>
      <h2>Your Shopping Cart</h2>
      <ul>
        {cartItems.map((item) => (
          <CartItem
            key={item.id} // Ïª¥Ìè¨ÎÑåÌä∏Î•º map ÎèåÎ¶¥Îïê Ìï≠ÏÉÅ keyÍ∞íÏùÑ Ïú†ÏßÄÌïòÏûê
            item={{
              // propsÎ°ú ÎÑòÍ∏∏ itemÏùò Î™©Î°ù
              id: item.id,
              title: item.name,
              quantity: item.quantity,
              total: item.totalPrice,
              price: item.price,
            }}
          />
        ))}
      </ul>
    </Card>
  );
};

export default Cart;

// CartItem.js
import { useDispatch } from 'react-redux';

import classes from './CartItem.module.css';
import { cartActions } from '../../store/cart-slice';

const CartItem = (props) => {
  const dispatch = useDispatch();

  const { title, quantity, total, price, id } = props.item;

  const removeItemHandler = () => {
    dispatch(cartActions.removeItemFromCart(id));
  };

  const addItemHandler = () => {
    dispatch(
      cartActions.addItemToCart({ // payloadÎ°ú itemÏóê Îì§Ïñ¥Í∞ÄÎäî Ï†ïÎ≥¥Î•º ÎÑòÍ∏¥Îã§
        id,
        title,
        price,
      })
    );
  };

  return (
    <li className={classes.item}>
      <header>
        <h3>{title}</h3>
        <div className={classes.price}>
          ${total.toFixed(2)}{' '}
          <span className={classes.itemprice}>(${price.toFixed(2)}/item)</span>
        </div>
      </header>
      <div className={classes.details}>
        <div className={classes.quantity}>
          x <span>{quantity}</span>
        </div>
        <div className={classes.actions}>
          <button onClick={removeItemHandler}>-</button>
          <button onClick={addItemHandler}>+</button>
        </div>
      </div>
    </li>
  );
};

export default CartItem;
```

### 5. ÏáºÌïëÎ™∞Ïóê ÏûàÎäî itemÏùÑ Ïû•Î∞îÍµ¨ÎãàÎ°ú ÎÑ£Í∏∞ (ÎçîÎØ∏ ÏïÑÏù¥ÌÖúÏùÑ Ïù¥Ïö©)

```jsx
// Products.js

import ProductItem from './ProductItem';
import classes from './Products.module.css';

const DUMMY_PRODUCTS = [
  {
    id: 'p1',
    price: 6,
    title: 'My First Book',
    description: 'The first book I ever wrote',
  },
  {
    id: 'p2',
    price: 5,
    title: 'My Second Book',
    description: 'The second book I ever wrote',
  },
];

const Products = (props) => {
  return (
    <section className={classes.products}>
      <h2>Buy your favorite products</h2>
      <ul>
        {DUMMY_PRODUCTS.map((product) => (
          <ProductItem
            key={product.id}
            id={product.id}
            title={product.title}
            price={product.price}
            description={product.description}
          />
        ))}
      </ul>
    </section>
  );
};

export default Products;

// ProductItem.js

import { useDispatch } from 'react-redux';

import { cartActions } from '../../store/cart-slice';
import Card from '../UI/Card';
import classes from './ProductItem.module.css';

const ProductItem = (props) => {
  const dispatch = useDispatch();

  const { title, price, description, id } = props;

  const addToCartHandler = () => { // Ïû•Î∞îÍµ¨ÎãàÎ°ú Ï∂îÍ∞ÄÌïúÎã§
    dispatch(
      cartActions.addItemToCart({
        id,
        title,
        price,
      })
    );
  };

  return (
    <li className={classes.item}>
      <Card>
        <header>
          <h3>{title}</h3>
          <div className={classes.price}>${price.toFixed(2)}</div>
        </header>
        <p>{description}</p>
        <div className={classes.actions}>
          <button onClick={addToCartHandler}>Add to Cart</button>
        </div>
      </Card>
    </li>
  );
};

export default ProductItem;
```

### Í≤∞Í≥ºÎ¨º

![redux_review](../../img/0308_01.gif)

## Î¶¨ÎçïÏä§Ïùò ÎπÑÎèôÍ∏∞Ï≤òÎ¶¨

> Î¶¨ÎçïÏä§Îäî ÏàúÏàòÌï®ÏàòÏù¥Í∏∞ ÎïåÎ¨∏Ïóê Ïô∏Î∂ÄÍ∞ùÏ≤¥Î•º Î≥ÄÍ≤ΩÌïòÎäî ÎπÑÎèôÍ∏∞ Ï≤òÎ¶¨ÎÇò, side-effect Í¥ÄÎ†® ÏóÖÎ¨¥Î•º ÌïòÎ©¥ ÏïàÎêúÎã§!

- ACtion creatorsÎ•º ÏÇ¨Ïö©ÌïòÍ±∞ÎÇò
- uesEffect()Î•º Ïù¥Ïö©Ìï¥ Ïª¥Ìè¨ÎÑåÌä∏ÏóêÏÑú ÏÇ¨Ïö©ÌïòÍ±∞ÎÇò
  Î°ú Ìï¥Í≤∞Ìï†Ïàò ÏûàÎã§

```jsx
// App.js
import { useSelector } from "react-redux";
import { useEffect } from "react";
import Cart from "./components/Cart/Cart";
import Layout from "./components/Layout/Layout";
import Products from "./components/Shop/Products";

function App() {
  const showCart = useSelector((state) => state.ui.cartIsVisible);
  const cart = useSelector((state) => state.cart);

  // Ïù¥Î†áÍ≤åÌïòÎ©¥ ÏùºÎã® reduxÏóê ÏùòÌï¥ cartÍ∞íÏù¥ Î≥ÄÍ≤ΩÎê†ÎïåÎßàÎã§ BEÏóê Ï†ÄÏû•ÌïòÎäîÍ≤ÉÍ≥º Í∞ôÎã§
  useEffect(() => {
    fetch("https://react-http-6b4a6.firebaseio.com/cart.json", {
      method: "PUT",
      body: JSON.stringify(cart),
    });
  }, [cart]);
  return (
    <Layout>
      {showCart && <Cart />}
      <Products />
    </Layout>
  );
}

export default App;
```

# ÏïåÍ≥†Î¶¨Ï¶ò

## 14719 : ÎπóÎ¨º

```jsx
// 14719
/* 

Ï≤´Ïß∏Ï§ÑÎ°ú 2Ï∞®Ïõê Î∞∞Ïó¥ÏùÑ ÎßåÎì§Í≥†
ÎëòÏ®∞ Ï§ÑÎ°ú Ìï¥Îãπ ÏúÑÏπòÎ•º trueÎ°ú ÎßåÎì§Ïûê
Í∑∏Î¶¨Í≥† ÎèåÎ©¥ÏÑú Ï≤òÏùå trueÍ∞Ä ÎÇòÏò®Í≥≥Í≥º Îã§Ïùå trueÍ∞Ä ÎÇòÏò® Ï∞®Ïù¥Î•º Íµ¨Ìï¥ÏÑú
Ï†ÑÎ∂ÄÎã§ ÎèåÎ©¥ Íµ¨Ìï¥ÏßàÎìØÌïòÎã§

*/

testCase = require("fs")
  .readFileSync(process.platform == "linux" ? "/dev/stdin" : "ÏòàÏ†ú.txt")
  .toString()
  .trim()
  .split("\n");
const [col, row] = testCase.shift().split(" ").map(Number);

const arr = testCase[0].split(" ").map(Number);

dimension = Array.from(Array(col), () => Array(row + 1).fill(false));

arr.map((el, idx) => {
  for (let i = 0; i < el; i++) {
    dimension[i][idx + 1] = true;
  }
});

let answer = 0;
let prv = 0;

for (let i = 0; i < col; i++) {
  let betweenTrue = [];
  for (let j = 1; j <= row; j++) {
    if (dimension[i][j]) {
      betweenTrue.push(j);
      if (betweenTrue.length == 2 && betweenTrue[1] - betweenTrue[0] == 1) {
        betweenTrue.shift();
      }
    }

    if (betweenTrue.length == 2) {
      console.log(betweenTrue, i, j);
      answer += betweenTrue[1] - betweenTrue[0] - 1;
      betweenTrue.shift();
    }
  }
}
console.log(answer);
// 26Î∂Ñ
```

## 14888 : Ïó∞ÏÇ∞Ïûê ÎÅºÏõåÎÑ£Í∏∞

```jsx
// 14888

/* 
Ï≤´Ïß∏Ï§Ñ testCase Number
ÎëòÏß∏Ï§Ñ Ïó∞ÏÇ¥Ìï† Ïàò
ÏÖãÏß∏Ï§Ñ Ïó∞ÏÇ∞ÏûêÍ∞úÏàò

DFSÎ°ú Ï°∞Ìï©ÏùÑ ÎèåÎ¶¨Î©¥ Îê†ÎìØ?

*/

testCase = require("fs")
  .readFileSync(process.platform == "linux" ? "/dev/stdin" : "ÏòàÏ†ú.txt")
  .toString()
  .trim()
  .split("\n");

num = testCase.shift();
arr = testCase.shift().split(" ").map(Number);
[add, mius, multy, divi] = testCase[0].split(" ").map(Number);
answer = [];

let maximum = -1e9;
let minimum = 1e9;
const make = (depth, total, add, mius, multy, divi) => {
  if (num == depth) {
    maximum = Math.max(total, maximum);
    minimum = Math.min(total, minimum);
    return;
  }
  if (add) make(depth + 1, total + arr[depth], add - 1, mius, multy, divi);
  if (mius) make(depth + 1, total - arr[depth], add, mius - 1, multy, divi);
  if (multy) make(depth + 1, total * arr[depth], add, mius, multy - 1, divi);
  if (divi)
    make(depth + 1, parseInt(total / arr[depth]), add, mius, multy, divi - 1);
};

make(1, arr[0], add, mius, multy, divi);
console.log(maximum + "\n" + minimum);
```

---

# ÎßàÏßÄÎßâÏúºÎ°ú

> ÎÇ¥ÏùºÏùÄ ÏôÄÏù¥Ïñ¥ ÌîÑÎ†àÏûÑ Ï§ÄÎπÑÎ•º Ìï¥Î≥¥Ïûê
