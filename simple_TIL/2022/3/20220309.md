# TIL ê°„ë‹¨íšŒê³ 

# Today I Learned

- [x] React (10:00 ~ 1: 25 )
- [x] í”„ë¡œê·¸ë˜ë¨¸ìŠ¤ ê³¼ì œ í’€ì´ (1:35 ~ 4:30)
- [x] ì•Œê³ ë¦¬ì¦˜

---

# ğŸ“¹ ë™ì˜ìƒ

[![section13](../../img/ì¸ë„¤ì¼/TIL.png)](https://youtu.be/I3TRYDUkpAo)

# React : ê³ ê¸‰ ë¦¬ë•ìŠ¤

# ë¦¬ë•ìŠ¤ ë³µìŠµ

## Store ë§Œë“¤ê¸°

```jsx
// index.js
import { configureStore } from "@reduxjs/toolkit";

import uiSlice from "./ui-slice";
import cartSlice from "./cart-slice";

const store = configureStore({
  reducer: { ui: uiSlice.reducer, cart: cartSlice.reducer },
});

export default store;
```

```jsx
// cart-slice.js
import { createSlice } from "@reduxjs/toolkit";

const cartSlice = createSlice({
  name: "cart",
  initialState: {
    items: [], // ì—¬ëŸ¬ ì•„ì´í…œì´ ë‹´ê¸¸ ë°°ì—´
    totalQuantity: 0,
  },
  reducers: {
    addItemToCart(state, action) {
      const newItem = action.payload; // ìƒˆë¡œìš´ ì•„ì´í…œì´ payloadë¡œ (ì–´ë–¤ê²Œ ë“¤ì–´ì˜¬ì§€ ëª¨ë¥´ë‹ˆ)

      // ì´ë¯¸ ì¡´ì¬í•˜ëŠ” ì•„ì´í…œì¸ê²½ìš°, í•´ë‹¹ ì•„ì´í…œì„ ì°¾ì•„ì¤€ë‹¤ (booleanê°’ìœ¼ë¡œ ë‚˜ì˜´)
      const existingItem = state.items.find((item) => item.id === newItem.id);
      state.totalQuantity++; // ì¼ë‹¨ ì „ì²´ ìˆ˜ëŸ‰ (ì¥ë°”êµ¬ë‹ˆì— ìˆëŠ” itemsì˜ ìˆ˜ëŸ‰)ì„ ì±„ì›Œì£¼ì

      if (!existingItem) {
        // ì´ë¯¸ ìˆì§€ ì•Šë‹¤ë©´?, ê·¸ëŒ€ë¡œ items ë°°ì—´ì— ì¶”ê°€í•˜ì

        // redux toolkitì—ëŠ” ê¸°ë³¸ì ìœ¼ë¡œ immer ì ìš©ë˜ì–´ ìˆê¸° ë•Œë¬¸ì— pushë¡œ í•´ë„ ê´œì°®ë‹¤
        state.items.push({
          // itemì— ë“¤ì–´ê°ˆ propoertyë“¤
          id: newItem.id,
          price: newItem.price,
          quantity: 1,
          totalPrice: newItem.price,
          name: newItem.title,
        });
      } else {
        // ì¡´ì¬í•˜ë©´, í•´ë‹¹ itemì˜ ìˆ˜ëŸ‰ì„ ëŠ˜ë ¤ì£¼ê³ 
        existingItem.quantity++;
        // priceë„ ì˜¬ë ¤ì£¼ì
        existingItem.totalPrice = existingItem.totalPrice + newItem.price;
      }
    },
    removeItemFromCart(state, action) {
      const id = action.payload;
      const existingItem = state.items.find((item) => item.id === id);
      state.totalQuantity--;

      // ì´ë¯¸ ìˆìœ¼ë‹ˆ, ì§€ìš´ë‹¤ëŠ” ëœ», 1ê°œ ë‚¨ì„ë•ŒëŠ” í•´ë‹¹ itmeì„ filterë¡œ ì‚­ì œ
      // ê·¸ ì „ê¹Œì§€ëŠ” ê³„ì† ì¤„ì—¬ë‚˜ê°„ë‹¤
      if (existingItem.quantity === 1) {
        state.items = state.items.filter((item) => item.id !== id);
      } else {
        existingItem.quantity--;
      }
    },
  },
});

export const cartActions = cartSlice.actions;

export default cartSlice;
```

```jsx
// ui-slice.js

import { createSlice } from "@reduxjs/toolkit";

const uiSlice = createSlice({
  name: "ui",
  initialState: { cartIsVisible: false },
  reducers: {
    toggle(state) {
      state.cartIsVisible = !state.cartIsVisible;
    },
  },
});

export const uiActions = uiSlice.actions;

export default uiSlice;
```

### store êµ¬ë…í•˜ê¸°

```jsx
// index.js
import ReactDOM from "react-dom";
import { Provider } from "react-redux";

import store from "./store/index";
import "./index.css";
import App from "./App";

ReactDOM.render(
  <Provider store={store}>
    <App />
  </Provider>,
  document.getElementById("root")
);
```

### cartê°€ í† ê¸€í• ë•Œë§Œ ë³´ì—¬ì§€ê²Œ í•˜ê¸°

```jsx
// App.js
import { useSelector } from 'react-redux';

import Cart from './components/Cart/Cart';
import Layout from './components/Layout/Layout';
import Products from './components/Shop/Products';

function App() {
  const showCart = useSelector((state) => state.ui.cartIsVisible);

  return (
    <Layout>
      {showCart && <Cart />}
      <Products />
    </Layout>
  );
}

export default App;

// CartButton.js
import { useDispatch, useSelector } from 'react-redux';

import { uiActions } from '../../store/ui-slice';
import classes from './CartButton.module.css';

const CartButton = (props) => {
  const dispatch = useDispatch();
  const cartQuantity = useSelector((state) => state.cart.totalQuantity);

  const toggleCartHandler = () => {
    dispatch(uiActions.toggle());
  };

  return (
    <button className={classes.button} onClick={toggleCartHandler}>
      <span>My Cart</span>
      <span className={classes.badge}>{cartQuantity}</span>
    </button>
  );
};

export default CartButton;
```

### 4. cart ì•„ì´í…œì´ ë™ì ìœ¼ë¡œ ë³€ê²½ë˜ê²Œ í•˜ê¸°

```jsx
// Cart.js
import { useSelector } from "react-redux";

import Card from "../UI/Card";
import classes from "./Cart.module.css";
import CartItem from "./CartItem";

const Cart = (props) => {
  const cartItems = useSelector((state) => state.cart.items);

  return (
    <Card className={classes.cart}>
      <h2>Your Shopping Cart</h2>
      <ul>
        {cartItems.map((item) => (
          <CartItem
            key={item.id} // ì»´í¬ë„ŒíŠ¸ë¥¼ map ëŒë¦´ë• í•­ìƒ keyê°’ì„ ìœ ì§€í•˜ì
            item={{
              // propsë¡œ ë„˜ê¸¸ itemì˜ ëª©ë¡
              id: item.id,
              title: item.name,
              quantity: item.quantity,
              total: item.totalPrice,
              price: item.price,
            }}
          />
        ))}
      </ul>
    </Card>
  );
};

export default Cart;

// CartItem.js
import { useDispatch } from 'react-redux';

import classes from './CartItem.module.css';
import { cartActions } from '../../store/cart-slice';

const CartItem = (props) => {
  const dispatch = useDispatch();

  const { title, quantity, total, price, id } = props.item;

  const removeItemHandler = () => {
    dispatch(cartActions.removeItemFromCart(id));
  };

  const addItemHandler = () => {
    dispatch(
      cartActions.addItemToCart({ // payloadë¡œ itemì— ë“¤ì–´ê°€ëŠ” ì •ë³´ë¥¼ ë„˜ê¸´ë‹¤
        id,
        title,
        price,
      })
    );
  };

  return (
    <li className={classes.item}>
      <header>
        <h3>{title}</h3>
        <div className={classes.price}>
          ${total.toFixed(2)}{' '}
          <span className={classes.itemprice}>(${price.toFixed(2)}/item)</span>
        </div>
      </header>
      <div className={classes.details}>
        <div className={classes.quantity}>
          x <span>{quantity}</span>
        </div>
        <div className={classes.actions}>
          <button onClick={removeItemHandler}>-</button>
          <button onClick={addItemHandler}>+</button>
        </div>
      </div>
    </li>
  );
};

export default CartItem;
```

### 5. ì‡¼í•‘ëª°ì— ìˆëŠ” itemì„ ì¥ë°”êµ¬ë‹ˆë¡œ ë„£ê¸° (ë”ë¯¸ ì•„ì´í…œì„ ì´ìš©)

```jsx
// Products.js

import ProductItem from './ProductItem';
import classes from './Products.module.css';

const DUMMY_PRODUCTS = [
  {
    id: 'p1',
    price: 6,
    title: 'My First Book',
    description: 'The first book I ever wrote',
  },
  {
    id: 'p2',
    price: 5,
    title: 'My Second Book',
    description: 'The second book I ever wrote',
  },
];

const Products = (props) => {
  return (
    <section className={classes.products}>
      <h2>Buy your favorite products</h2>
      <ul>
        {DUMMY_PRODUCTS.map((product) => (
          <ProductItem
            key={product.id}
            id={product.id}
            title={product.title}
            price={product.price}
            description={product.description}
          />
        ))}
      </ul>
    </section>
  );
};

export default Products;

// ProductItem.js

import { useDispatch } from 'react-redux';

import { cartActions } from '../../store/cart-slice';
import Card from '../UI/Card';
import classes from './ProductItem.module.css';

const ProductItem = (props) => {
  const dispatch = useDispatch();

  const { title, price, description, id } = props;

  const addToCartHandler = () => { // ì¥ë°”êµ¬ë‹ˆë¡œ ì¶”ê°€í•œë‹¤
    dispatch(
      cartActions.addItemToCart({
        id,
        title,
        price,
      })
    );
  };

  return (
    <li className={classes.item}>
      <Card>
        <header>
          <h3>{title}</h3>
          <div className={classes.price}>${price.toFixed(2)}</div>
        </header>
        <p>{description}</p>
        <div className={classes.actions}>
          <button onClick={addToCartHandler}>Add to Cart</button>
        </div>
      </Card>
    </li>
  );
};

export default ProductItem;
```

### ê²°ê³¼ë¬¼

![redux_review](../../img/0308_01.gif)

## ë¦¬ë•ìŠ¤ì˜ ë¹„ë™ê¸°ì²˜ë¦¬

> ë¦¬ë•ìŠ¤ëŠ” ìˆœìˆ˜í•¨ìˆ˜ì´ê¸° ë•Œë¬¸ì— ì™¸ë¶€ê°ì²´ë¥¼ ë³€ê²½í•˜ëŠ” ë¹„ë™ê¸° ì²˜ë¦¬ë‚˜, side-effect ê´€ë ¨ ì—…ë¬´ë¥¼ í•˜ë©´ ì•ˆëœë‹¤!

- ACtion creatorsë¥¼ ì‚¬ìš©í•˜ê±°ë‚˜
- uesEffect()ë¥¼ ì´ìš©í•´ ì»´í¬ë„ŒíŠ¸ì—ì„œ ì‚¬ìš©í•˜ê±°ë‚˜
  ë¡œ í•´ê²°í• ìˆ˜ ìˆë‹¤

```jsx
// App.js
import { useSelector } from "react-redux";
import { useEffect } from "react";
import Cart from "./components/Cart/Cart";
import Layout from "./components/Layout/Layout";
import Products from "./components/Shop/Products";

function App() {
  const showCart = useSelector((state) => state.ui.cartIsVisible);
  const cart = useSelector((state) => state.cart);

  // ì´ë ‡ê²Œí•˜ë©´ ì¼ë‹¨ reduxì— ì˜í•´ cartê°’ì´ ë³€ê²½ë ë•Œë§ˆë‹¤ BEì— ì €ì¥í•˜ëŠ”ê²ƒê³¼ ê°™ë‹¤
  useEffect(() => {
    fetch("https://react-http-6b4a6.firebaseio.com/cart.json", {
      method: "PUT",
      body: JSON.stringify(cart),
    });
  }, [cart]);
  return (
    <Layout>
      {showCart && <Cart />}
      <Products />
    </Layout>
  );
}

export default App;
```

# ì•Œê³ ë¦¬ì¦˜

## 14719 : ë¹—ë¬¼

```jsx
// 14719
/* 

ì²«ì§¸ì¤„ë¡œ 2ì°¨ì› ë°°ì—´ì„ ë§Œë“¤ê³ 
ë‘˜ì¨° ì¤„ë¡œ í•´ë‹¹ ìœ„ì¹˜ë¥¼ trueë¡œ ë§Œë“¤ì
ê·¸ë¦¬ê³  ëŒë©´ì„œ ì²˜ìŒ trueê°€ ë‚˜ì˜¨ê³³ê³¼ ë‹¤ìŒ trueê°€ ë‚˜ì˜¨ ì°¨ì´ë¥¼ êµ¬í•´ì„œ
ì „ë¶€ë‹¤ ëŒë©´ êµ¬í•´ì§ˆë“¯í•˜ë‹¤

*/

testCase = require("fs")
  .readFileSync(process.platform == "linux" ? "/dev/stdin" : "ì˜ˆì œ.txt")
  .toString()
  .trim()
  .split("\n");
const [col, row] = testCase.shift().split(" ").map(Number);

const arr = testCase[0].split(" ").map(Number);

dimension = Array.from(Array(col), () => Array(row + 1).fill(false));

arr.map((el, idx) => {
  for (let i = 0; i < el; i++) {
    dimension[i][idx + 1] = true;
  }
});

let answer = 0;
let prv = 0;

for (let i = 0; i < col; i++) {
  let betweenTrue = [];
  for (let j = 1; j <= row; j++) {
    if (dimension[i][j]) {
      betweenTrue.push(j);
      if (betweenTrue.length == 2 && betweenTrue[1] - betweenTrue[0] == 1) {
        betweenTrue.shift();
      }
    }

    if (betweenTrue.length == 2) {
      console.log(betweenTrue, i, j);
      answer += betweenTrue[1] - betweenTrue[0] - 1;
      betweenTrue.shift();
    }
  }
}
console.log(answer);
// 26ë¶„
```

## 14888 : ì—°ì‚°ì ë¼ì›Œë„£ê¸°

```jsx
// 14888

/* 
ì²«ì§¸ì¤„ testCase Number
ë‘˜ì§¸ì¤„ ì—°ì‚´í•  ìˆ˜
ì…‹ì§¸ì¤„ ì—°ì‚°ìê°œìˆ˜

DFSë¡œ ì¡°í•©ì„ ëŒë¦¬ë©´ ë ë“¯?

*/

testCase = require("fs")
  .readFileSync(process.platform == "linux" ? "/dev/stdin" : "ì˜ˆì œ.txt")
  .toString()
  .trim()
  .split("\n");

num = testCase.shift();
arr = testCase.shift().split(" ").map(Number);
[add, mius, multy, divi] = testCase[0].split(" ").map(Number);
answer = [];

let maximum = -1e9;
let minimum = 1e9;
const make = (depth, total, add, mius, multy, divi) => {
  if (num == depth) {
    maximum = Math.max(total, maximum);
    minimum = Math.min(total, minimum);
    return;
  }
  if (add) make(depth + 1, total + arr[depth], add - 1, mius, multy, divi);
  if (mius) make(depth + 1, total - arr[depth], add, mius - 1, multy, divi);
  if (multy) make(depth + 1, total * arr[depth], add, mius, multy - 1, divi);
  if (divi)
    make(depth + 1, parseInt(total / arr[depth]), add, mius, multy, divi - 1);
};

make(1, arr[0], add, mius, multy, divi);
console.log(maximum + "\n" + minimum);
```

---

# ë§ˆì§€ë§‰ìœ¼ë¡œ

> ë‚´ì¼ì€ ì™€ì´ì–´ í”„ë ˆì„ ì¤€ë¹„ë¥¼ í•´ë³´ì
