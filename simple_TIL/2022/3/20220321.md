# TIL ê°„ë‹¨íšŒê³ 

> JS ê³µë¶€ë¥¼ í•˜ëŠ”ë° ë„ˆë¬´ ì˜¤ë˜ê±¸ë ¸ë‹¤, MVCíŒ¨í„´ì„ ìµíˆë©´ì„œ ê¼­ í† ì´ í”„ë¡œì íŠ¸ë¥¼ í•´ì•¼ê² ë‹¤

# Today I Learned

- [x] Make YOGO UI
- [x] Vanilla JS

---

# ğŸ“¹ ë™ì˜ìƒ

[![section13](../../img/ì¸ë„¤ì¼/TIL.png)](https://youtu.be/jfk55HIF5rY)

# Vanilla JS

# **Implementing Search Results - Part 1**

> í™”ë©´ì— ë³´ì—¬ì§€ëŠ” ë ˆì‹œí”¼ í™”ë©´ì´ ì•„ë‹Œ, ê²€ìƒ‰ì°½ì—ì„œ ë‚˜ì˜¤ëŠ” ìš”ì•½ëœ ë ˆì‹œí”¼ë¥¼ ë³´ì—¬ì£¼ì

- ìƒˆë¡œìš´ ë¹„ë™ê¸° í•¨ìˆ˜ ë§Œë“¤ê¸°
- ìƒˆë¡œìš´ ìƒíƒœê°’ ë§Œë“¤ê¸°

### modelì—ì„œ ë¹„ì§€ë‹ˆìŠ¤ ë¡œì§ë§Œë“¤ê¸°

```jsx
import { async } from "regenerator-runtime";
import { API_URL } from "./config.js";
import { getJSON } from "./helpers";
export const state = {
  recipe: {},
  search: {
    // ë‚˜ì¤‘ì¼ ìœ„í•´ ì¿¼ë¦¬ëŠ” ì €ì¥í•´ë‘ì,
    query: "",
    results: [],
  },
};

export const loadRecipe = async function (id) {
  try {
    // loding recipe'

    const data = await getJSON(`${API_URL}/${id}`);

    let { recipe } = data.data;
    state.recipe = {
      id: recipe.id,
      title: recipe.title,
      publisher: recipe.publisher,
      sourceUrl: recipe.source_url,
      image: recipe.image_url,
      servings: recipe.servings,
      cookingTime: recipe.cooking_time,
      ingredients: recipe.ingredients,
    };

    // console.log(recipe);
  } catch (err) {
    // Temp error handling
    console.error(`${err} ğŸ”¥ ğŸ”¥ ğŸ”¥ ğŸ”¥`);
    throw err; // í—¬í¼ functionê³¼ ë§ˆì°¬ê°€ì§€ë¡œ errë¥¼ ë˜ì ¸ì¤˜ì•¼í•œë‹¤ ì´ë ‡ê²Œ í•˜ë©´ loadRecipeë¥¼ ë¶€ë¥´ëŠ” controllerì— ë³´ë‚´ì§€ê³  controllerì€ viewì˜ í•¨ìˆ˜ë¥¼ ì´ìš©í•´ errë¥¼ ë³´ì—¬ì¤€ë‹¤
  }
};

// ë¬´ì—‡ì„ ê²€ìƒ‰í• ì§€ queryë¡œ ë˜ì €ì¤„ê²ƒì´ë‹¤
export const loadSearchResults = async function (query) {
  try {
    // ì¿¼ë¦¬ ì €ì¥
    state.search.query = query;
    const data = await getJSON(`${API_URL}?search=${query}`);

    // ê²€ìƒ‰ ê²°ê³¼ ì €ì¥
    state.search.results = data.data.recipes.map((rec) => {
      return {
        id: rec.id,
        title: rec.title,
        publisher: rec.publisher,
        image: rec.image_url,
      };
    });
    console.log(state.search.results);
  } catch (err) {
    console.error(`${err} ğŸ”¥ ğŸ”¥ ğŸ”¥ ğŸ”¥`);
    throw err;
  }
};

loadSearchResults("pizza");
```

### ì»¨ë“œë¡¤ëŸ¬ì—ì„œ modelë¥¼ ë¶ˆëŸ¬ë³´ì

```jsx
const controlSearchResults = async function () {
  try {
    await model.loadSearchResults("pizza");
  } catch (err) {
    console.log(err);
  }
};
```

### í•˜ì§€ë§Œ ì…ë ¥ì´ ì¼ì–´ë‚˜ëŠ” ì´ë²¤íŠ¸ëŠ”? ë·°ì—ì„œ í•´ì•¼í•œë‹¤

> í•œë²ˆì € publisher - subscriber íŒ¨í„´ì„ ì‚¬ìš©í•˜ì

```jsx
class SearchView {
  #parentEl = document.querySelector('.search');

  getQuery() {
    const query = this.#parentEl.querySelector('.search__field').value;
    this.#clearInput();

    return query;
  }
  #clearInput() {
    this.#parentEl.querySelector('.search__field').value = '';
  }
  addHandlerSearch(handler) {
    this.#parentEl.addEventListener('submit', function (e) {
      e.preventDefault();
      handler(); // searchRecipeí•¨ìˆ˜ê°€ ë“¤ì–´ì˜¬ê²ƒ..
    });
  }
}
export default new SearchView();

.. (êµ¬ë…)
const controlSearchResults = async function () {
  try {
    // 1) Get search query
    const query = searchView.getQuery();
    if (!query) return;

    // 2) load search results
    await model.loadSearchResults(query);
  } catch (err) {
    console.log(err);
  }
};

const init = function () {
  recipeView.addHandlerRender(controlRecipe);
  searchView.addHandlerSearch(controlSearchResults);
};
init();

```

# **Implementing Search Results - Part 2**

> ê²€ìƒ‰ ê²°ê³¼ë¥¼ ë³´ì—¬ì£¼ëŠ” viewê°€ í•„ìš”í•˜ë‹¤

- recipeViewì™€ ìƒˆë¡œë§Œë“¤ resultViewê°€ ìœ ì‚¬í•œê²Œ ë§ìœ¼ë‹ˆ, í•˜ë‚˜ì˜ ë¶€ëª¨ í´ë˜ìŠ¤ë¥¼ ë§Œë“¤ì–´ ì‚¬ìš©í•˜ì

### 1. ìƒìœ„ ë¶€ëª¨ View class

```jsx
import icons from 'url:../../img/icons.svg'; //

export default class View {
  _data; // renderì— ë“¤ì–´ê°ˆ ë°ì´í„°
  render(data) {
    this._data = data;
    const markup = this._generateMarkup();
    this._clear();
    this._parentElement.insertAdjacentHTML('afterbegin', markup); //
  }

  _clear() {
    this._parentElement.innerHTML = '';
  }`
  renderSpinner = function () {
    const markup = `
        <div class="spinner">
        <svg>
          <use href="${icons}#icon-loader"></use>
        </svg>
      </div>
      `;
    this._clear();
    this._parentElement.insertAdjacentHTML('afterbegin', markup);
  };

  renderError(message = this._errorMessage) {
    const markup = `
      <div class="error">
      <div>
        <svg>
          <use href="${icons}#icon-alert-triangle"></use>
        </svg>
      </div>
      <p>${message}</p>
    </div>
      `;
    this._clear();
    this._parentElement.insertAdjacentHTML('afterbegin', markup);
  }

  renderMessage(message = this._message) {
    const markup = `
      <div class="message">
      <div>
        <svg>
          <use href="${icons}#icon-smile"></use>
        </svg>
      </div>
      <p>${message}</p>
    </div>
      `;
    this._clear();
    this._parentElement.insertAdjacentHTML('afterbegin', markup);
  }
}
```

- ê³µí†µë˜ëŠ” ë¶€ë¶„ì„ ë„£ì—ˆë‹¤

### ê·¸ë ‡ë‹¤ë©´ dataëŠ” ì–´ë–»ê²Œ ë°›ì•„ì˜¤ë‚˜ìš”..?

> ì»¨íŠ¸ë¡¤ì—ì„œ í•´ë‹¹ í´ë˜ìŠ¤ê°€ ìƒì†ë°›ì€ renderí•¨ìˆ˜ì— dataë¥¼ ë„£ì–´ì£¼ë©´ í•´ë‹¹ dataê°€ renderí•¨ìˆ˜ì— ì˜í•´ì„œ ìƒì„±ì´ë˜ê³  í•´ë‹¹ ë‚´ìš©ì´ resultViewì—ì„œ ì‚¬ìš©í• ìˆ˜ ìˆê²Œ ëœë‹¤

```jsx
// 3) Render results
    resultView.render(model.state.search.results);

//resultView.js
import View from './View.js';
// recipeViewë‘ ìƒë‹¹íˆ ìœ ì‚¬í•˜ë‹¤
class ResultView extends View {
  _parentElement = document.querySelector('.results');

  _generateMarkup() {
    console.log(this._data);
    return `
    <li class="preview">
    <a class="preview__link" href="#23456">
      <figure class="preview__fig">
        <img src="src/img/test-1.jpg" alt="Test" />
      </figure>
      <div class="preview__data">
        <h4 class="preview__name">
          Pasta with Tomato Cream ...
        </h4>
        <p class="preview__author">The Pioneer Woman</p>
      </div>
    </a>
  </li>
      `;
  }
}

export default new ResultView();

// ëª¨ë“ ë ˆì‹œí”¼ë¥¼ ë§Œë“¤ê¸° ìœ„í•´
import View from './View.js';
import icons from 'url:../../img/icons.svg';
// recipeViewë‘ ìƒë‹¹íˆ ìœ ì‚¬í•˜ë‹¤
class ResultView extends View {
  _parentElement = document.querySelector('.results');

  _generateMarkup() {
    console.log(this._data);
    return this._data.map(this._generateMarkupPriview).join('');
  }
  _generateMarkupPriview(result) {
    console.log('ê²°ê³¼ ì•„ì´ë””', result.id);
    return `
    <li class="preview">
    <a class="preview__link" href="#${result.id}">
      <figure class="preview__fig">
        <img src="${result.image}" alt="Test" />
      </figure>
      <div class="preview__data">
      <h4 class="preview__title">${result.title}<h4>
      <p class="preview__publisher">${result.publisher}
      </div>
    </a>
  </li>
      `;
  }
}

export default new ResultView();
```

![image](https://user-images.githubusercontent.com/79236624/159387310-2cff96a5-2ce4-4f2e-97fb-68e07a964d44.png)

![image](https://user-images.githubusercontent.com/79236624/159387321-4aac5f7c-2c7c-4d27-aac3-82e61e67b752.png)

### ğŸ¤”Â Hot ë¡œë”©?

```jsx
// controller.js
if (module.hot) {
  // parcel ë¬¸ë²•ì´ë‹¤
  module.hot.accept();
}
```

ë¹ ë¥¸ ëª¨ë“ˆ êµì²´(Hot Module Replacement)(ì´í•˜ HMR)ëŠ” ëŸ°íƒ€ì„ì— í˜ì´ì§€ ìƒˆë¡œê³ ì¹¨ ì—†ì´ ëª¨ë“ˆì„ ìë™ìœ¼ë¡œ ê°±ì‹ í•˜ë¯€ë¡œ ê°œë°œ ê²½í—˜ì„ í–¥ìƒì‹œí‚µë‹ˆë‹¤. ì‘ì€ ë³€í™”ì— ë”°ë¼ ì• í”Œë¦¬ì¼€ì´ì…˜ ìƒíƒœë¥¼ ê³„ì† ìœ ì§€í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. Parcel HMR ì€ JavaScript ì™€ CSS ì• ì…‹ ëª¨ë‘ë¥¼ ì§€ì›í•©ë‹ˆë‹¤. í”„ë¡œë•ì…˜ ëª¨ë“œì—ì„œ HMR ì€ ìë™ìœ¼ë¡œ ë¹„í™œì„±í™” ë©ë‹ˆë‹¤.

íŒŒì¼ì„ ì €ì¥í•˜ë©´ Parcel ì€ ë³€í•œ ë¶€ë¶„ì„ ë‹¤ì‹œ ë¹Œë“œí•˜ê³  ì´ì— ì˜í–¥ì„ ë°›ëŠ” ëª¨ë“  ì‹¤í–‰ì¤‘ì¸ í´ë¼ì´ì–¸íŠ¸ì— ìƒˆ ì½”ë“œë¥¼ ë³´ëƒ…ë‹ˆë‹¤. ê·¸ í›„ ìƒˆ ì½”ë“œëŠ” ì´ì „ ë²„ì „ê³¼ êµì²´ë˜ê³  ëª¨ë“  ë¶€ëª¨ê°€ í•¨ê»˜ ë‹¤ì‹œ í‰ê°€ ë©ë‹ˆë‹¤. ì´ ê³¼ì • ì¤‘Â `module.hot`Â API ë¥¼ ì‚¬ìš©í•´ í›…(hook)ì„ ê±¸ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì´ë¥¼ í†µí•´ ëª¨ë“ˆì´ ë²„ë ¤ì§ˆ ë•Œ, ë˜ëŠ” ìƒˆ ë²„ì „ì´ ë“¤ì–´ì˜¬ ë•Œ ì½”ë“œì— ì•Œë ¤ì¤„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.Â [react-hot-loader](https://github.com/gaearon/react-hot-loader)ê°™ì€ í”„ë¡œì íŠ¸ëŠ” ì´ ê³¼ì •ì— ë„ì›€ì´ ë˜ë©°, Parcel ì— ë°”ë¡œ ì“¸ ìˆ˜ ìˆìŠµë‹ˆë‹¤.

`module.hot.accept`Â ì™€Â `module.hot.dispose`Â ë‘ ë©”ì†Œë“œë¥¼ ì•Œì•„ ë‘ì„¸ìš”.Â `module.hot.accept`ë¥¼ ì´ ëª¨ë“ˆì´ë‚˜ ì´ ëª¨ë“ˆì˜ ë‹¤ë¥¸ ì˜ì¡´ ì‚¬í•­ì´ ê°±ì‹ ë  ë•Œ ì‹¤í–‰ë˜ëŠ” ì½œë°±ê³¼ í•¨ê»˜ í˜¸ì¶œí•©ë‹ˆë‹¤.Â `module.hot.dispose`ëŠ” ì´ ëª¨ë“ˆì´ êµì²´ë  ë•Œ í˜¸ì¶œë˜ëŠ” ì½œë°±ì„ ë°›ì•„ë“¤ì…ë‹ˆë‹¤.

```
if (module.hot) {
  module.hot.dispose(function() {
// ëª¨ë“ˆì´ ê³§ íê¸° ë¨
  })

  module.hot.accept(function() {
// ëª¨ë“ˆì´ë‚˜ ëª¨ë“ˆì˜ ì˜ì¡´ ì‚¬í•­ì´ ê³§ ê°±ì‹  ë¨
  })
}
```

## ì˜ ë‚˜ì˜¤ê¸°ëŠ” í•˜ì§€ë§Œ ë¬¸ì œê°€ ìˆë‹¤..!

> ì„±ê³µì€ í•˜ì§€ë§Œ ë¹ˆ ë°°ì—´ì´ë‹¤..

![image](https://user-images.githubusercontent.com/79236624/159387341-764d5bba-5598-4523-9b7b-15e79707b2ab.png)

### 1. resultViewì—ì„œ errorê°€ ìƒê¸¸ë•Œ ë‚˜ì˜¤ëŠ” ë©”ì„¸ì§€ë¥¼ ëª…ì‹œí•˜ì

```jsx
class ResultView extends View {
  _parentElement = document.querySelector('.results');
  _errorMessage = 'No recipes found for your query! Please try again;';
  _message = '';
```

### 2. Viewì—ì„œ dataë¥¼ ì²´í¬í•´, ì—ëŸ¬ê°€ ë‚˜ë©´ ì—ëŸ¬ ë©”ì„¸ì§€ë¥¼ ë°˜í™˜í•˜ì

```jsx
export default class View {
   render(data) {
    // dataê°€ ì—†ê±°ë‚˜, ë°°ì—´ì´ ì•„ë‹ˆê±°ë‚˜ ,ë¹ˆ ë°°ì—´ì´ë©´ ë¬¸ì œê°€ ìƒê¹€
    if (!data || (Array.isArray(data) && data.length === 0))
      return this.renderError();
```

![image](https://user-images.githubusercontent.com/79236624/159387355-e2ccfd3e-8e61-44b9-a030-deafa957fb43.png)

# **Implementing Pagination - Part 1**

> ë„ˆë¬´ ë§ì€ ê²°ê³¼ê°€ ë‹¤ ë³´ì´ê¸° ë–„ë¬¸ì—, 10ê°œì”©ë§Œ ë³´ì—¬ì£¼ëŠ” í˜ì´ì§€ë¥¼ ë§Œë“¤ì–´ë³´ì

```jsx
// model
import { async } from "regenerator-runtime";
import { API_URL, RES_PER_PAGE } from "./config.js";
import { getJSON } from "./helpers";
export const state = {
  recipe: {},
  search: {
    // ë‚˜ì¤‘ì¼ ìœ„í•´ ì¿¼ë¦¬ëŠ” ì €ì¥í•´ë‘ì,
    query: "",
    results: [],
    page: 1,
    resultsPerPage: RES_PER_PAGE, // 10
  },
};

export const loadRecipe = async function (id) {
  try {
    // loding recipe'

    const data = await getJSON(`${API_URL}/${id}`);

    let { recipe } = data.data;
    state.recipe = {
      id: recipe.id,
      title: recipe.title,
      publisher: recipe.publisher,
      sourceUrl: recipe.source_url,
      image: recipe.image_url,
      servings: recipe.servings,
      cookingTime: recipe.cooking_time,
      ingredients: recipe.ingredients,
    };

    // console.log(recipe);
  } catch (err) {
    // Temp error handling
    console.error(`${err} ğŸ”¥ ğŸ”¥ ğŸ”¥ ğŸ”¥`);
    throw err; // í—¬í¼ functionê³¼ ë§ˆì°¬ê°€ì§€ë¡œ errë¥¼ ë˜ì ¸ì¤˜ì•¼í•œë‹¤ ì´ë ‡ê²Œ í•˜ë©´ loadRecipeë¥¼ ë¶€ë¥´ëŠ” controllerì— ë³´ë‚´ì§€ê³  controllerì€ viewì˜ í•¨ìˆ˜ë¥¼ ì´ìš©í•´ errë¥¼ ë³´ì—¬ì¤€ë‹¤
  }
};

// ë¬´ì—‡ì„ ê²€ìƒ‰í• ì§€ queryë¡œ ë˜ì €ì¤„ê²ƒì´ë‹¤
export const loadSearchResults = async function (query) {
  try {
    // ì¿¼ë¦¬ ì €ì¥
    state.search.query = query;
    const data = await getJSON(`${API_URL}?search=${query}`);

    // ê²€ìƒ‰ ê²°ê³¼ ì €ì¥
    state.search.results = data.data.recipes.map((rec) => {
      return {
        id: rec.id,
        title: rec.title,
        publisher: rec.publisher,
        image: rec.image_url,
      };
    });
    console.log(state.search.results);
  } catch (err) {
    console.error(`${err} ğŸ”¥ ğŸ”¥ ğŸ”¥ ğŸ”¥`);
    throw err;
  }
};

export const getSearchResultPage = function (page = state.search.page) {
  state.search.page = page;
  const start = (page - 1) * state.search.resultsPerPage; // 0
  const end = page * state.search.resultsPerPage; // 9

  return state.search.results.slice(start, end);
};

//controller
resultView.render(model.getSearchResultPage());
```

![image](https://user-images.githubusercontent.com/79236624/159387376-246c1fda-08bd-4944-b1fc-1201afe873c5.png)

# **Implementing Pagination - Part 2**

> í˜ì´ì§€ ê¸°ëŠ¥ì„ ìœ„í•œ ë·°ë¥¼ ë”°ë¡œ ë§Œë“¤ì–´ì£¼ì

ìƒê°í•´ë‘¬ì—¬í•  ì‹œë‚˜ë¦¬ì˜¤ëŠ”

1. ì²«ë²ˆì§¸ í˜ì´ì§€
   1. ì´ë©´ì„œ ë‹¤ìŒ í˜ì´ì§€ê°€ ìˆëŠ” ê²½ìš°
   2. ì´ë©´ì„œ ë‹¤ìŒ í˜ì´ì§€ê°€ ì—†ëŠ” ê²½ìš°
2. ë§ˆì§€ë§‰ í˜ì´ì§€ ì¸ê²½ìš°
3. ì²«ë²ˆì¬ë„ ë§ˆì§€ë§‰í˜ì´ì§€ë„ ì•„ë‹Œê²½ìš°

```jsx
import View from "./View";
import icons from "url:../../img/icons.svg";

class PaginationView extends View {
  _parentElement = document.querySelector(".pagiantion");

  _generateMarkup() {
    const numPages = Math.ceil(
      this._data.results.length / this._data.resultsPerPage
    );

    // Page 1, and there are other pages
    if (this._data.page === 1 && numPages && numPages > 1) {
      return "page 1, others";
    }

    // Last Page
    if (this._data.page === numPages) {
      return "last page";
    }

    // other page
    if (this._data.page < numPages) {
      return "other";
    }

    // Page 1, and there are No other pages
    return "only 1 page";
  }
}

export default new PaginationView();
```

### ì´ì œ ë²„íŠ¼ í•´ë‹¹ ì‹œë‚˜ë¦¬ì˜¤ì— ë§ê²Œ ë²„íŠ¼ì„ ëœë”ë§í•˜ì

```jsx
import View from "./View";
import icons from "url:../../img/icons.svg";

class PaginationView extends View {
  _parentElement = document.querySelector(".pagination");

  _generateMarkup() {
    const curPage = this._data.page;
    const numPages = Math.ceil(
      this._data.results.length / this._data.resultsPerPage
    );

    // Page 1, and there are other pages
    if (curPage === 1 && numPages && numPages > 1) {
      return ` <button class="btn--inline pagination__btn--next">
      <span>Page ${curPage + 1}</span>
      <svg class="search__icon">
        <use href="${icons}#icon-arrow-right"></use>
      </svg>
    </button>`;
    }

    // Last Page
    if (curPage === numPages) {
      return ` <button class="btn--inline pagination__btn--prev">
      <svg class="search__icon">
        <use href="${icons}icon-arrow-left"></use>
      </svg>
      <span>Page ${curPage - 1}</span>
    </button>`;
    }

    // other page
    if (curPage < numPages) {
      return `
      <button class="btn--inline pagination__btn--prev">
      <svg class="search__icon">
        <use href="${icons}icon-arrow-left"></use>
      </svg>
      <span>Page ${curPage - 1}</span>
    </button>
    <button class="btn--inline pagination__btn--next">
      <span>Page ${curPage + 1}</span>
      <svg class="search__icon">
        <use href="${icons}#icon-arrow-right"></use>
      </svg>
    </button>
    `;
    }

    // Page 1, and there are No other pages
    return "";
  }
}

export default new PaginationView();
```

![image](https://user-images.githubusercontent.com/79236624/159387397-c437d8a8-a56b-430c-b08a-03b9fa62e148.png)

### ì´ì œ ë²„íŠ¼ì— ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆë¥¼ ë‹¬ì•„ì£¼ì (ëŠ˜ ê·¸ë¬ë“¯ publisher - subscriber)

```jsx
// PaginationView
addHandlerClick(handler) {
    this._parentElement.addEventListener('click', function (e) {
      // paginationì•ˆì— ìˆëŠ” ì–´ë– í•œ ìì‹ë“¤ì¤‘ í•˜ë‚˜ë¼ë„ ì´ë²¤íŠ¸ê°€ ìƒê¸´ë‹¤ë©´, svg, spanë“± ì—¬íŠ¼ ê·¸ë ‡ë‹´ ê·¸ ìœ„ë¡œ .btn--inline'ë¥¼ ê°€ì§„ê²Œ btnì´ë‹ˆê¹ btnì„ ì°¾ì•„ ê°ˆìˆ˜ ìˆë‹¤
      const btn = e.target.closest('.btn--inline');
      console.log(btn);
      handler();
    });
  }

// controller

// ìƒˆë¡œìš´ ì»¨íŠ¸ë¡¤ëŸ¬ë¥¼ ë§Œë“¤ì–´ì£¼ì (í´ë¦­í• ë•Œë§ˆë‹¤ ìƒê¹€)
const controlPaination = function () {
  console.log('Page controller');
};

const init = function () {
  recipeView.addHandlerRender(controlRecipe);
  searchView.addHandlerSearch(controlSearchResults);
  paginationView.addHandlerClick(controlPaination);
};
init();
```
![image](https://user-images.githubusercontent.com/79236624/159387415-34b6778a-bad9-4f27-861b-af03973a29c5.png)

### ğŸ¤”Â ê·¸ë ‡ë‹´ ì–´ë–»ê²Œ ì´ì „,ë‹¤ìŒ pageë¥¼ getSearchResultPage()ì—ê²Œ ë„˜ê¸¸ê¹Œ?

> data-setì„ ì´ìš©í•˜ì!

```jsx
// PaginationView
import View from "./View";
import icons from "url:../../img/icons.svg";

class PaginationView extends View {
  _parentElement = document.querySelector(".pagination");

  addHandlerClick(handler) {
    this._parentElement.addEventListener("click", function (e) {
      // paginationì•ˆì— ìˆëŠ” ì–´ë– í•œ ìì‹ë“¤ì¤‘ í•˜ë‚˜ë¼ë„ ì´ë²¤íŠ¸ê°€ ìƒê¸´ë‹¤ë©´, svg, spanë“± ì—¬íŠ¼ ê·¸ë ‡ë‹´ ê·¸ ìœ„ë¡œ .btn--inline'ë¥¼ ê°€ì§„ê²Œ btnì´ë‹ˆê¹ btnì„ ì°¾ì•„ ê°ˆìˆ˜ ìˆë‹¤
      const btn = e.target.closest(".btn--inline");

      if (!btn) return;

      const goToPage = +btn.dataset.goto;
      console.log(btn);
      handler(goToPage); // datasetì„ ì´ìš©í•œ ê°’ì„ í•¸ë“¤ëŸ¬ì— ì „ë‹¬í•´ì¤€ë‹¤
    });
  }

  _generateMarkup() {
    const curPage = this._data.page;
    const numPages = Math.ceil(
      this._data.results.length / this._data.resultsPerPage
    );

    // Page 1, and there are other pages
    if (curPage === 1 && numPages && numPages > 1) {
      return ` <button class="btn--inline pagination__btn--next" data-goto="${
        curPage + 1
      }">
      <span>Page ${curPage + 1}</span>
      <svg class="search__icon">
        <use href="${icons}#icon-arrow-right"></use>
      </svg>
    </button>`;
    }

    // Last Page
    if (curPage === numPages) {
      return ` <button class="btn--inline pagination__btn--prev" data-goto="${
        curPage - 1
      }">
      <svg class="search__icon">
        <use href="${icons}icon-arrow-left"></use>
      </svg>
      <span>Page ${curPage - 1}</span>
    </button>`;
    }

    // other page
    if (curPage < numPages) {
      return `
      <button class="btn--inline pagination__btn--prev" data-goto="${
        curPage - 1
      }">
      <svg class="search__icon">
        <use href="${icons}icon-arrow-left"></use>
      </svg>
      <span>Page ${curPage - 1}</span>
    </button>
    <button class="btn--inline pagination__btn--next" data-goto="${
      curPage + 1
    }">
      <span>Page ${curPage + 1}</span>
      <svg class="search__icon">
        <use href="${icons}#icon-arrow-right"></use>
      </svg>
    </button>
    `;
    }

    // Page 1, and there are No other pages
    return "";
  }
}

export default new PaginationView();
```

```jsx
// controller
// ìƒˆë¡œìš´ ì»¨íŠ¸ë¡¤ëŸ¬ë¥¼ ë§Œë“¤ì–´ì£¼ì (í´ë¦­í• ë•Œë§ˆë‹¤ ìƒê¹€), ê°’ì„ ë°›ì•„ì„œ ìƒˆë¡œ í˜ì´ì§€ë¥¼ ëœë”ë§ í• ê²ƒ
const controlPaination = function (goToPage) {
  // 1) New Render results
  resultView.render(model.getSearchResultPage(goToPage)); // getSearchResultPageì— ì˜í•´ ìƒíƒœ ê°’(page)ì´ ë³€ê²½ëœë‹¤ => ëœë”ë§ ë˜ëŠ”ê²Œ ë°”ë€œ

  /// 2) New Render inital pagination buttons
  paginationView.render(model.state.search);
};
```


# ë§ˆì§€ë§‰ìœ¼ë¡œ
> íŒ€ í”„ë¡œì íŠ¸ ì§„í–‰í•´ì„œ ë¹¨ë¦¬ 
