# TIL ê°„ë‹¨íšŒê³ 

> Jsì—ì„œ ì•„í‚¤í…ì²˜ë¥¼ ë°°ì›Œì„œ, ìŠ¤í„°ë””ì— ì¨ë¨¹ì–´ë³´ì•˜ë‹¤. ì§ì ‘ ì½”ë“œë¥¼ ê³ ë¯¼í•˜ë©´ì„œ ë³µìŠµí•˜ëŠ”ê²Œ ì¢‹ì€ê²ƒê°™ë‹¤. í•­ìƒ í† ì´ í”„ë¡œì íŠ¸ë¥¼ ì§„í–‰í•˜ë©´ì„œ ë³µìŠµí•˜ë©´ ì¢‹ì„ê²ƒ ê°™ë‹¤!

# Today I Learned

- [x] Vanilla Js
- [x] programmers study
- [x] BaekJoon Algorithm
- [x] programmers Algorithm

---

# Vnailla SJ

# Developing a DOM Updating Algorithm

> ê¹œë¹¡ì´ëŠ” ì´ìœ ëŠ” ì „ì²´ viewë¥¼ ëœë”ë§ í•˜ê¸° ë•Œë¬¸ì— ì´ë¯¸ì§€ê°€ ê¹œë¹¡ì´ëŠ”ê²ƒì´ë‹¤, ì´ëŸ´ë•ŒëŠ” ë¡œì§ì„ ë”°ë¡œ ë§Œë“¤ì–´ì„œ ì‚¬ìš©í•˜ì (renderê°€ ì•„ë‹Œ updateë¡œ)

## update ë¡œì§ ë§Œë“¤ê¸°

### 1. ë§ˆí¬ì—… ë¬¸ìì—´ì„ ë³€í™˜í•˜ì

> ìƒˆë¡œë“¤ì–´ì˜¨ dataì— ëŒ€í•´ markUpì„ ë§Œë“ ë‹¤

```jsx
update(data) {
    // ë°ì´í„° ê²€ì‚¬ë¥¼ ì§„í–‰í•˜ê³  (ì¤‘ë³µë˜ë‹ˆê¹ í•¨ìˆ˜ë¡œ ë§Œë“¤ì–´ë†“ìœ¼ë©´ ì¢‹ì„ë“¯?)
    if (!data || (Array.isArray(data) && data.length === 0))
      return this.renderError();

    this._data = data;
    const newMarkUp = this._generateMarkup();
  }
```

### 2. ê°€ìƒë”ì„ ë§Œë“¤ì–´ ë©”ëª¨ë¦¬ì— ë†“ì

> ë©”ëª¨ë¦¬ì— markupì„ ì˜¬ë¦¬ì

```jsx
update(data) {
    // ë°ì´í„° ê²€ì‚¬ë¥¼ ì§„í–‰í•˜ê³  (ì¤‘ë³µë˜ë‹ˆê¹ í•¨ìˆ˜ë¡œ ë§Œë“¤ì–´ë†“ìœ¼ë©´ ì¢‹ì„ë“¯?)
    if (!data || (Array.isArray(data) && data.length === 0))
      return this.renderError();

    this._data = data;
    const newMarkUp = this._generateMarkup();

    // ê°€ìƒë”ì„ ë§Œë“¤ì
    const newDOM = document.createRange().createContextualFragment(newMarkUp);
    const newElements = Array.from(newDOM.querySelectorAll('*'));
    const curElements = Array.from(this._parentElement.querySelectorAll('*'));

  }
```

### 3. ê·¸ë¦¬ê³  í˜„ì¬ë”ì™€ ê°€ìƒë”ì„ ë¹„êµí•´ ë‹¤ë¥¼ ê²½ìš° ê°€ìƒë”ìœ¼ë¡œ updateí•˜ì

```jsx
update(data) {
    // ë°ì´í„° ê²€ì‚¬ë¥¼ ì§„í–‰í•˜ê³  (ì¤‘ë³µë˜ë‹ˆê¹ í•¨ìˆ˜ë¡œ ë§Œë“¤ì–´ë†“ìœ¼ë©´ ì¢‹ì„ë“¯?)
    if (!data || (Array.isArray(data) && data.length === 0))
      return this.renderError();

    this._data = data;
    const newMarkUp = this._generateMarkup();

    // ê°€ìƒë”ì„ ë§Œë“¤ì
    const newDOM = document.createRange().createContextualFragment(newMarkUp);
    const newElements = Array.from(newDOM.querySelectorAll('*'));
    const curElements = Array.from(this._parentElement.querySelectorAll('*'));

    newElements.forEach((newEl, i) => {
      const curEl = curElements[i];
      console.log(curEl, newEl.isEqualNode(curEl));

      if (!newEl.isEqualNode(curEl)) {
        curEl.textContent = newEl.textContent;
      }
    });
  }
```

![image](https://user-images.githubusercontent.com/79236624/160509922-30ab500a-e142-44cb-a22e-bb5a0b85474a.png)

![image](https://user-images.githubusercontent.com/79236624/160509933-bd5d46b7-4eea-47a7-93a3-aa4de1718e7a.png)

- textnode ìì‹ì˜ ëª¨ë“  textë¥¼ ë°˜í™˜í•˜ê¸° ë•Œë¬¸ì—, newEL ì•„ë˜ì— ìˆë˜ textnodeê°€ ì „ë¶€ íŒŒì‹±ë˜ì–´ ìƒˆë¡œìš´ curElì˜ textnodeë¡œ ë“¤ì–´ê°€ ë²„ë ¸ë‹¤

### 4. í•˜ì§€ë§Œ ë³€í™”ê°€ ìˆì„ë•Œ ì „ì²´ê°€ ë°”ë€ŒëŠ” ë¬¸ì œê°€ ìˆë‹¤..?

> ìš°ë¦¬ê°€ ë°”ê¾¸ê³  ì‹¶ì€ê±´ text ë¿ì´ë‹¤, nodeValueë¥¼ ì´ìš©í•˜ì!

![image](https://user-images.githubusercontent.com/79236624/160509944-41906bed-d601-4d9c-9aea-12f778b947dc.png)

- ë…¸ë“œê°€ ìš”ì†Œì¸ê²½ìš°ëŠ” ë¬´ì‹œ, ì˜¤ë¡œì§€ textì¸ ê²½ìš° contentë¥¼ ê°€ì ¸ì˜¨ë‹¤!
  - ì¦‰, í•´ë‹¹í•˜ëŠ” ë…¸ë“œìš”ì†Œì˜ textê°€ ë³€ê²½ëœ ê²½ìš°ë§Œ trueë¡œ ë§Œë“¤ì–´ì£¼ì!
- í…ìŠ¤íŠ¸ëŠ” ì²«ë²ˆì§¸ ìì‹ì´ë‹ˆ, ìš”ì†Œì˜ ì²«ë²ˆì§¸ ìì‹ì— ì ‘ê·¼í•˜ì!

```jsx
update(data) {
    // ë°ì´í„° ê²€ì‚¬ë¥¼ ì§„í–‰í•˜ê³  (ì¤‘ë³µë˜ë‹ˆê¹ í•¨ìˆ˜ë¡œ ë§Œë“¤ì–´ë†“ìœ¼ë©´ ì¢‹ì„ë“¯?)
    if (!data || (Array.isArray(data) && data.length === 0))
      return this.renderError();

    this._data = data;
    const newMarkUp = this._generateMarkup();

    // ê°€ìƒë”ì„ ë§Œë“¤ì
    const newDOM = document.createRange().createContextualFragment(newMarkUp);
    const newElements = Array.from(newDOM.querySelectorAll('*'));
    const curElements = Array.from(this._parentElement.querySelectorAll('*'));

    newElements.forEach((newEl, i) => {
      const curEl = curElements[i];
      console.log(curEl, newEl.isEqualNode(curEl));

      if (
        !newEl.isEqualNode(curEl) &&
        newEl.firstChild?.nodeValue.trim() !== ''
      ) {
        curEl.textContent = newEl.textContent;
        console.log('í‹€ë¦°ê²ƒë§Œ!', curEl, newEl);
      }
    });
  }
```
### 5. í•˜ì§€ë§Œ 3ê³¼ 5ì—ì„œë§Œ ì›€ì§ì¸ë‹¤

> í…ìŠ¤íŠ¸ë§Œ ë³€ê²½í–ˆê³  ìš”ì†ŒëŠ” ë³€ê²½í•œê²Œ ì•„ë‹ˆê¸°ë•Œë¬¸ì—! (data-updata-toë¥¼ ë³€ê²½í•´ì¤˜ì•¼í•˜ ë¡œì§ìƒ, í•´ë‹¹ valueë¥¼ í†µí•´ ë ˆì‹œí”¼ ì¸ë¶„ì´ ë°”ë€Œê¸° ë•Œë¬¸)

![image](https://user-images.githubusercontent.com/79236624/160509965-fd348432-712d-4896-9863-9c9ee410bc57.png)
```jsx
update(data) {
    // ë°ì´í„° ê²€ì‚¬ë¥¼ ì§„í–‰í•˜ê³  (ì¤‘ë³µë˜ë‹ˆê¹ í•¨ìˆ˜ë¡œ ë§Œë“¤ì–´ë†“ìœ¼ë©´ ì¢‹ì„ë“¯?)
    if (!data || (Array.isArray(data) && data.length === 0))
      return this.renderError();

    this._data = data;
    const newMarkUp = this._generateMarkup();

    // ê°€ìƒë”ì„ ë§Œë“¤ì
    const newDOM = document.createRange().createContextualFragment(newMarkUp);
    const newElements = Array.from(newDOM.querySelectorAll('*'));
    const curElements = Array.from(this._parentElement.querySelectorAll('*'));

    newElements.forEach((newEl, i) => {
      const curEl = curElements[i];
      console.log(curEl, newEl.isEqualNode(curEl));

      // Update changed TEXT
      if (
        !newEl.isEqualNode(curEl) &&
        newEl.firstChild?.nodeValue.trim() !== ''
      ) {
        curEl.textContent = newEl.textContent;
      }

      //Update changed ATTRIBUES
      if (!newEl.isEqualNode(curEl)) {
        Array.from(newEl.attributes).forEach(attr =>
          curEl.setAttribute(attr.name, attr.value)
        );
      }
    });
  }
```

- ê°€ìƒë”ê³¼ ë‹¤ë¥¸ attrivutesì¸ê²½ìš° ìˆœíšŒë¥¼ ëŒë ¤ ìƒˆë¡œ setì„ í•´ì¤€ë‹¤

![image](https://user-images.githubusercontent.com/79236624/160509987-e1602a1d-ef4d-44ea-84de-57997a2d730c.png)

ë³€ê²½ì´ ì˜ ëœë‹¤

## ì´ì œëŠ” ì™¼ìª½ì˜ ë ˆì‹œí”¼ ë¦¬ìŠ¤íŠ¸ë¥¼ ëˆ„ë¥¼ë•Œë„ ìƒˆë¡­ê²Œ ëœë”ë§í•˜ëŠ”ê²Œ ì•„ë‹ˆë¼, í•„ìš”í•œ ë¶€ë¶„ë§Œ update í•´ë³´ì

> ì¶”ê°€ë¡œ ì„ íƒëœ ìƒíƒœë¥¼ ì¶”ê°€í•˜ëŠ” class ë¡œì§ì„ ë„£ì

### ì„ íƒëœ ìƒíƒœë¥¼ ì¶”ê°€í•˜ëŠ” ë¡œì§

```jsx
// resultView.js
_generateMarkupPriview(result) {
    // í•´ì‰¬ê°’ ê°€ì ¸ì˜¤ê¸°
    const id = window.location.hash.slice(1);
    return `
    <li class="preview">
    <a class="preview__link ${result.id === id ? 'preview__link--active': ''}" href="#${result.id}">
      <figure class="preview__fig">
        <img src="${result.image}" alt="${result.title}" />
      </figure>
      <div class="preview__data">
      <h4 class="preview__title">${result.title}</h4>
      <p class="preview__publisher">${result.publisher}</p>
      </div>
    </a>
  </li>
      `;
  }
}
```

- í•´ì‰¬ê°’ê³¼ ëœë”ë§ëœ markupì´ ê°™ìœ¼ë©´ ì„ íƒë˜ì—ˆë‹¤ëŠ” cssë¥¼ ì£¼ì

```jsx
// controller.js
const controlRecipe = async function () {
  try {
    // getHash
    const id = window.location.hash.slice(1);

    // guard clause
    if (!id) return;

    // loding svg
    recipeView.renderSpinner();

    // 0) Updata recipe
    resultView.update(model.getSearchResultPage());

    // 1) Loding Recipe (from model.js)
    await model.loadRecipe(id);

    // 2) Rendering recipe
    recipeView.render(model.state.recipe);
  } catch (err) {
    console.error(new Error());
    recipeView.renderError();
  }
};
```

# **Implementing Bookmarks - Part 1**

## ë¶ë§ˆí¬ ë¡œì§ì„ ë§Œë“¤ì

```jsx
// model.js

import { async } from "regenerator-runtime";
import { API_URL, RES_PER_PAGE } from "./config.js";
import { getJSON } from "./helpers";
export const state = {
  recipe: {},
  search: {
    // ë‚˜ì¤‘ì¼ ìœ„í•´ ì¿¼ë¦¬ëŠ” ì €ì¥í•´ë‘ì,
    query: "",
    results: [],
    page: 1,
    resultsPerPage: RES_PER_PAGE,
  },
  bookmarks: [],
};

export const loadRecipe = async function (id) {
  try {
    // loding recipe'

    const data = await getJSON(`${API_URL}/${id}`);

    let { recipe } = data.data;
    state.recipe = {
      id: recipe.id,
      title: recipe.title,
      publisher: recipe.publisher,
      sourceUrl: recipe.source_url,
      image: recipe.image_url,
      servings: recipe.servings,
      cookingTime: recipe.cooking_time,
      ingredients: recipe.ingredients,
    };

    // console.log(recipe);
  } catch (err) {
    // Temp error handling
    console.error(`${err} ğŸ”¥ ğŸ”¥ ğŸ”¥ ğŸ”¥`);
    throw err; // í—¬í¼ functionê³¼ ë§ˆì°¬ê°€ì§€ë¡œ errë¥¼ ë˜ì ¸ì¤˜ì•¼í•œë‹¤ ì´ë ‡ê²Œ í•˜ë©´ loadRecipeë¥¼ ë¶€ë¥´ëŠ” controllerì— ë³´ë‚´ì§€ê³  controllerì€ viewì˜ í•¨ìˆ˜ë¥¼ ì´ìš©í•´ errë¥¼ ë³´ì—¬ì¤€ë‹¤
  }
};

// ë¬´ì—‡ì„ ê²€ìƒ‰í• ì§€ queryë¡œ ë˜ì €ì¤„ê²ƒì´ë‹¤
export const loadSearchResults = async function (query) {
  try {
    // ì¿¼ë¦¬ ì €ì¥
    state.search.query = query;
    const data = await getJSON(`${API_URL}?search=${query}`);

    // ê²€ìƒ‰ ê²°ê³¼ ì €ì¥
    state.search.results = data.data.recipes.map((rec) => {
      return {
        id: rec.id,
        title: rec.title,
        publisher: rec.publisher,
        image: rec.image_url,
      };
    });
    // ìƒˆë¡œìš´ ë ˆì‹œí”¼ë¥¼ ê²€ìƒ‰í• ë–„ pageë¥¼ 1ë¡œ ë°”ê¿”ì¤˜ì•¼í•œë‹¤
    state.search.page = 1;
  } catch (err) {
    console.error(`${err} ğŸ”¥ ğŸ”¥ ğŸ”¥ ğŸ”¥`);
    throw err;
  }
};

export const getSearchResultPage = function (page = state.search.page) {
  state.search.page = page;
  const start = (page - 1) * state.search.resultsPerPage; // 0
  const end = page * state.search.resultsPerPage; // 9

  return state.search.results.slice(start, end);
};

export const updateServings = function (newServings) {
  state.recipe.ingredients.forEach((ing) => {
    ing.quantity = (ing.quantity * newServings) / state.recipe.servings;
  });

  state.recipe.servings = newServings;
};

export const addBookmark = function (recipe) {
  // add bookmark
  state.bookmarks.push(recipe);

  // Mark current recipe as bookmark (ìƒˆì†ì„±ì„ ì¶”ê°€í•´ì„œ ë³´ì—¬ì£¼ê¸°)
  if (recipe.id === state.recipe.id) state.recipe.bookmarked = true;
};

//controller.js

const controlAddBookmark = function () {
  model.addBookmark(model.state.recipe);
};

// recipeView.js

import View from "./View.js";

// import icons from '../img/icons.svg'; // Parcel 1
import icons from "url:../../img/icons.svg"; // Parcel 2
import { Fraction } from "fractional";

class RecipeView extends View {
  _parentElement = document.querySelector(".recipe");
  _errorMessage = "We could not find that recipe. Please try another one!";
  _message = "";

  addHandlerRender(handler) {
    ["hashchange", "load"].forEach((ev) =>
      window.addEventListener(ev, handler)
    );
  }

  addHandlerUpdateServings(handler) {
    this._parentElement.addEventListener("click", function (e) {
      const btn = e.target.closest(".btn--update-servings");
      if (!btn) return;
      const { updateTo } = btn.dataset;
      if (+updateTo > 0) handler(+updateTo);
    });
  }

  addHandlerAddBookmark(handler) {
    this._parentElement.addEventListener("click", function (e) {
      const btn = e.target.closest(".btn--bookmark");
      if (!btn) return;
      handler();
    });
  }

  _generateMarkup() {
    return `
      <figure class="recipe__fig">
        <img src="${this._data.image}" alt="${
      this._data.title
    }" class="recipe__img" />
        <h1 class="recipe__title">
          <span>${this._data.title}</span>
        </h1>
      </figure>

      <div class="recipe__details">
        <div class="recipe__info">
          <svg class="recipe__info-icon">
            <use href="${icons}#icon-clock"></use>
          </svg>
          <span class="recipe__info-data recipe__info-data--minutes">${
            this._data.cookingTime
          }</span>
          <span class="recipe__info-text">minutes</span>
        </div>
        <div class="recipe__info">
          <svg class="recipe__info-icon">
            <use href="${icons}#icon-users"></use>
          </svg>
          <span class="recipe__info-data recipe__info-data--people">${
            this._data.servings
          }</span>
          <span class="recipe__info-text">servings</span>

          <div class="recipe__info-buttons">
            <button class="btn--tiny btn--update-servings" data-update-to="${
              this._data.servings - 1
            }">
              <svg>
                <use href="${icons}#icon-minus-circle"></use>
              </svg>
            </button>
            <button class="btn--tiny btn--update-servings" data-update-to="${
              this._data.servings + 1
            }">
              <svg>
                <use href="${icons}#icon-plus-circle"></use>
              </svg>
            </button>
          </div>
        </div>

        <div class="recipe__user-generated ${this._data.key ? "" : "hidden"}">
        </div>
        <button class="btn--round btn--bookmark">
          <svg class="">
            <use href="${icons}#icon-bookmark${
      this._data.bookmarked ? "-fill" : ""
    }"></use>
          </svg>
        </button>
      </div>

      <div class="recipe__ingredients">
        <h2 class="heading--2">Recipe ingredients</h2>
        <ul class="recipe__ingredient-list">
          ${this._data.ingredients.map(this._generateMarkupIngredient).join("")}
      </div>

      <div class="recipe__directions">
        <h2 class="heading--2">How to cook it</h2>
        <p class="recipe__directions-text">
          This recipe was carefully designed and tested by
          <span class="recipe__publisher">${
            this._data.publisher
          }</span>. Please check out
          directions at their website.
        </p>
        <a
          class="btn--small recipe__btn"
          href="${this._data.sourceUrl}"
          target="_blank"
        >
          <span>Directions</span>
          <svg class="search__icon">
            <use href="${icons}#icon-arrow-right"></use>
          </svg>
        </a>
      </div>
    `;
  }

  _generateMarkupIngredient(ing) {
    return `
    <li class="recipe__ingredient">
      <svg class="recipe__icon">
        <use href="${icons}#icon-check"></use>
      </svg>
      <div class="recipe__quantity">${
        ing.quantity ? new Fraction(ing.quantity).toString() : ""
      }</div>
      <div class="recipe__description">
        <span class="recipe__unit">${ing.unit}</span>
        ${ing.description}
      </div>
    </li>
  `;
  }
}

export default new RecipeView();
```

![image](https://user-images.githubusercontent.com/79236624/160510012-f5dc5c31-f35f-4770-aee1-c6c4f6ed62b9.png)
### í•˜ì§€ë§Œ ìƒˆë¡œìš´ í˜ì´ì§€ë¥¼ ë¡œë“œí• ë•Œë§ˆë‹¤ bookedmarkedê°€ ì‚¬ë¼ì§„ë‹¤..

> APIì—ì„œ ìƒˆë¡œ ë¡œë“œë˜ê¸°ë•Œë¬¸.., ë°ì´í„°ë¥¼ ë¶ˆëŸ¬ì˜¬ë•Œ, bookmark ë°°ì—´ì„ í™•ì¸í•´ ìˆëŠ”ê²½ìš°ì™€ ì—†ëŠ”ê²½ìš°ë¥¼ ë”°ì ¸ ì£¼ì

```jsx
// model.js
export const loadRecipe = async function (id) {
  try {
    // loding recipe'

    const data = await getJSON(`${API_URL}/${id}`);

    let { recipe } = data.data;
    state.recipe = {
      id: recipe.id,
      title: recipe.title,
      publisher: recipe.publisher,
      sourceUrl: recipe.source_url,
      image: recipe.image_url,
      servings: recipe.servings,
      cookingTime: recipe.cooking_time,
      ingredients: recipe.ingredients,
    };

    if (state.bookmarks.some((bookmarked) => bookmarked.id === id))
      state.recipe.bookmarked = true;
    else state.recipe.bookmarked = false;

    // console.log(recipe);
  } catch (err) {
    // Temp error handling
    console.error(`${err} ğŸ”¥ ğŸ”¥ ğŸ”¥ ğŸ”¥`);
    throw err; // í—¬í¼ functionê³¼ ë§ˆì°¬ê°€ì§€ë¡œ errë¥¼ ë˜ì ¸ì¤˜ì•¼í•œë‹¤ ì´ë ‡ê²Œ í•˜ë©´ loadRecipeë¥¼ ë¶€ë¥´ëŠ” controllerì— ë³´ë‚´ì§€ê³  controllerì€ viewì˜ í•¨ìˆ˜ë¥¼ ì´ìš©í•´ errë¥¼ ë³´ì—¬ì¤€ë‹¤
  }
};
```
## ì´ì œëŠ” ë¶ë§ˆí¬ë¥¼ ì‚­ì œí•´ë³´ì

```jsx
// model.js

export const deleteBookmark = function (id) {
  // Delete bookmark
  const index = state.bookmarks.findIndex((el) => el.id === id);
  // í•´ë‹¹ ë¶€ë¶„ë§Œ .spliceë¡œ ìë¥¸ë‹¤
  state.bookmarks.splice(index, 1);

  // // Mark current recipe as NOT bookmark
  if (id === state.recipe.id) state.recipe.bookmarked = false;
};
```

### ë¶ë§ˆí¬ë¥¼ ì‚¬ìš©í•˜ëŠ”ê²½ìš°ì™€ ì‚¬ìš©í•˜ì§€ ì•ŠëŠ” ê²½ìš°ë¡œ ë‚˜ëˆ„ì–´ë³´ì

```jsx
// controller.js

const controlAddBookmark = function () {
  // ë¶ë§ˆí¬ê°€ ì—†ë‹¤ë©´ ì¶”ê°€
  if (!model.state.recipe.bookmark) model.addBookmark(model.state.recipe);
  // ë¶ë§ˆí¬ê°€ ìˆë‹¤ë©´ ì‚­ì œ
  else model.deleteBookmark(model.state.recipe.id);

  recipeView.update(model.state.recipe);
};
```

# **Implementing Bookmarks - Part 2**

> ë¶ë§ˆí¬ íŒ¨ë„ì— ë¶ë§ˆí¬í•œê²ƒë“¤ì„ í‘œì‹œí•´ë³´ì

## bookmarkView ë§Œë“¤ê¸°

```jsx
import View from "./View.js";
import previewView from "./previewView.js";
import icons from "url:../../img/icons.svg"; // Parcel 2

class BookmarksView extends View {
  _parentElement = document.querySelector(".bookmarks__list");
  _errorMessage = "No bookmarks yet. Find a nice recipe and bookmark it ;)";
  _message = "";

  addHandlerRender(handler) {
    window.addEventListener("load", handler);
  }

  _generateMarkup() {
    return this._data
      .map((bookmark) => previewView.render(bookmark, false))
      .join("");
  }
}

export default new BookmarksView();
```

### bookmarkì•ˆì— ìˆëŠ” previewëŠ” bookmarkì˜ ê³ ìœ  markupì´ ì•„ë‹ˆê¸° ë•Œë¬¸ì— ë°”ê¾¸ì

```jsx
import View from "./View.js";
import icons from "url:../../img/icons.svg"; // Parcel 2

class PreviewView extends View {
  _parentElement = "";

  _generateMarkup() {
    const id = window.location.hash.slice(1);

    return `
      <li class="preview">
        <a class="preview__link ${
          this._data.id === id ? "preview__link--active" : ""
        }" href="#${this._data.id}">
          <figure class="preview__fig">
            <img src="${this._data.image}" alt="${this._data.title}" />
          </figure>
          <div class="preview__data">
            <h4 class="preview__title">${this._data.title}</h4>
            <p class="preview__publisher">${this._data.publisher}</p>
            <div class="preview__user-generated ${
              this._data.key ? "" : "hidden"
            }">
              <svg>
              <use href="${icons}#icon-user"></use>
              </svg>
            </div>
          </div>
        </a>
      </li>
    `;
  }
}

export default new PreviewView();
```

### Viewì—ì„œ í•­ìƒ ëœë”ë§ì´ ë˜ë©´ ì•ˆëœë‹¤, ì—†ëŠ” ê²½ìš°ë¥¼ ìƒê°í•´ì•¼í•˜ê¸°ë•Œë¬¸ì— propsë¥¼ ì¶”ê°€í•˜ì

> ê·¸ ì´ìœ ëŠ” bookmarkì—ì„œ renderí•´ì•¼í•˜ëŠ”ê²ƒì€ ë¬¸ìì—´ì¸ë°, perviewì˜ ë°˜í™˜ê°’ì´ ë¬¸ìì—´ì´ ì•„ë‹ˆë©´ ì•ˆë˜ê¸°ë–„ë¬¸!

```jsx

// bookmarksView.js
import View from './View.js';
import previewView from './previewView.js';
import icons from 'url:../../img/icons.svg'; // Parcel 2

class BookmarksView extends View {
  _parentElement = document.querySelector('.bookmarks__list');
  _errorMessage = 'No bookmarks yet. Find a nice recipe and bookmark it ;)';
  _message = '';

  addHandlerRender(handler) {
    window.addEventListener('load', handler);
  }

  _generateMarkup() {
    return this._data // ë¬¸ìì—´ë¡œ ë°˜í™˜ë˜ì–´ì•¼í•¨
      .map(bookmark => previewView.render(bookmark, false)) // ì¤‘ê°„ì— ëœë”ë§ ë˜ë©´ ì•ˆëœë‹¤
      .join('');
  }
}'

export default new BookmarksView();
// preView.js

import View from '../../../../final/src/js/views/View.js';
import icons from 'url:../../img/icons.svg'; // Parcel 2

class PreviewView extends View {
  _parentElement = '';

  _generateMarkup() {
    const id = window.location.hash.slice(1);

    return `
      <li class="preview">
        <a class="preview__link ${
          this._data.id === id ? 'preview__link--active' : ''
        }" href="#${this._data.id}">
          <figure class="preview__fig">
            <img src="${this._data.image}" alt="${this._data.title}" />
          </figure>
          <div class="preview__data">
            <h4 class="preview__title">${this._data.title}</h4>
            <p class="preview__publisher">${this._data.publisher}</p>
            <div class="preview__user-generated ${
              this._data.key ? '' : 'hidden'
            }">
              <svg>
              <use href="${icons}#icon-user"></use>
              </svg>
            </div>
          </div>
        </a>
      </li>
    `;
  }
}

export default new PreviewView();

// View.js
export default class View {
  _data; // renderì— ë“¤ì–´ê°ˆ ë°ì´í„°
  render(data, render = true) {
    // dataê°€ ì—†ê±°ë‚˜, ë°°ì—´ì´ ì•„ë‹ˆê±°ë‚˜ ,ë¹ˆ ë°°ì—´ì´ë©´ ë¬¸ì œê°€ ìƒê¹€
    if (!data || (Array.isArray(data) && data.length === 0))
      return this.renderError();

    this._data = data;
    const markup = this._generateMarkup();

    if (!render) return markup;
    this._clear();
    this._parentElement.insertAdjacentHTML('afterbegin', markup); //
  }
... ìƒëµ
```

### ì»¨íŠ¸ë¡¤ëŸ¬ì—ì„œ renderì™€ updateë¥¼ ë‹¬ì•„ì£¼ì

```jsx
import * as model from "./model.js";

import "core-js/stable";
import "regenerator-runtime/runtime";
import recipeView from "./views/recipeView.js";
import { async } from "regenerator-runtime/runtime";
import searchView from "./views/searchView.js";
import resultView from "./views/resultView.js";
import paginationView from "./views/paginationView.js";
import bookmarskView from "./views/bookmarksView.js";
const recipeContainer = document.querySelector(".recipe");

// https://forkify-api.herokuapp.com/v2

///////////////////////////////////////

if (module.hot) {
  // parcel ë¬¸ë²•ì´ë‹¤
  module.hot.accept();
}
const controlRecipe = async function () {
  try {
    // getHash
    const id = window.location.hash.slice(1);

    // guard clause
    if (!id) return;

    // loding svg
    recipeView.renderSpinner();

    // 0) Updata recipe
    resultView.update(model.getSearchResultPage());
    bookmarskView.update(model.state.bookmarks);

    // 1) Loding Recipe (from model.js)
    await model.loadRecipe(id);

    // 2) Rendering recipe
    recipeView.render(model.state.recipe);
  } catch (err) {
    console.error(new Error());
    recipeView.renderError();
  }
};

const controlSearchResults = async function () {
  try {
    resultView.renderSpinner();
    // 1) Get search query
    const query = searchView.getQuery();
    if (!query) return;

    // 2) load search results
    await model.loadSearchResults(query);

    // 3) Render results
    // resultView.render(model.state.search.results);
    resultView.render(model.getSearchResultPage());

    /// 4) Render inital pagination buttons
    paginationView.render(model.state.search);
  } catch (err) {
    console.log(err);
  }
};
// ìƒˆë¡œìš´ ì»¨íŠ¸ë¡¤ëŸ¬ë¥¼ ë§Œë“¤ì–´ì£¼ì (í´ë¦­í• ë•Œë§ˆë‹¤ ìƒê¹€), ê°’ì„ ë°›ì•„ì„œ ìƒˆë¡œ í˜ì´ì§€ë¥¼ ëœë”ë§ í• ê²ƒ
const controlPaination = function (goToPage) {
  // 1) New Render results
  resultView.render(model.getSearchResultPage(goToPage)); // getSearchResultPageì— ì˜í•´ ìƒíƒœ ê°’(page)ì´ ë³€ê²½ëœë‹¤ => ëœë”ë§ ë˜ëŠ”ê²Œ ë°”ë€œ

  /// 2) New Render inital pagination buttons
  paginationView.render(model.state.search);
};

const controlServings = function (newServings) {
  // Update the recipe servings (in state)
  model.updateServings(newServings);

  // Update the recipe view
  // recipeView.render(model.state.recipe);
  recipeView.update(model.state.recipe);
};

const controlAddBookmark = function () {
  // ë¶ë§ˆí¬ê°€ ì—†ë‹¤ë©´ ì¶”ê°€
  if (!model.state.recipe.bookmarked) model.addBookmark(model.state.recipe);
  // ë¶ë§ˆí¬ê°€ ìˆë‹¤ë©´ ì‚­ì œ
  else model.deleteBookmark(model.state.recipe.id);
  recipeView.update(model.state.recipe);

  // 3) Render bookmarks
  bookmarskView.render(model.state.bookmarks);
};

const init = function () {
  recipeView.addHandlerRender(controlRecipe);
  recipeView.addHandlerUpdateServings(controlServings);
  recipeView.addHandlerAddBookmark(controlAddBookmark);
  searchView.addHandlerSearch(controlSearchResults);
  paginationView.addHandlerClick(controlPaination);
};
init();
```

![image](https://user-images.githubusercontent.com/79236624/160510042-e2ec3650-8969-45e0-8846-d18672388c9b.png)

### resultViewë„ ë˜‘ê°™ì€ preViewë¥¼ ì‚¬ìš©í•˜ë‹ˆ ë°”ê¾¸ì

```jsx
import View from "./View.js";
import previewView from "./previewView.js";
import icons from "url:../../img/icons.svg"; // Parcel 2

class ResultsView extends View {
  _parentElement = document.querySelector(".results");
  _errorMessage = "No recipes found for your query! Please try again ;)";
  _message = "";

  _generateMarkup() {
    return this._data
      .map((result) => previewView.render(result, false))
      .join("");
  }
}

export default new ResultsView();
```

#

# BaekJoon Algorithm

## ë¦¬ëª¨ì½˜

```jsx
// 1107 : ë¦¬ëª¨ì»¨
/**
ì´ ë¬¸ì œëŠ” ì´ë™í•˜ë ¤ê³  í•˜ëŠ” ì±„ë„ì´ 500,000ê¹Œì§€ ì´ë¯€ë¡œ ëˆ„ë¥¼ ìˆ˜ ìˆëŠ” ì±„ë„ì„ ëª¨ë‘ ì¡°ì‚¬í•œ ë‹¤ìŒ,

í•´ë‹¹ ì±„ë„ì—ì„œ Nê¹Œì§€ ì–¼ë§ˆë§Œí¼ + ë˜ëŠ” - ë¥¼ í•´ì•¼ ê°ˆ ìˆ˜ ìˆì„ ì§€ë¥¼ êµ¬í•´ ê°€ì¥ ìµœì†Œì˜ íšŸìˆ˜ë¥¼ êµ¬í•˜ë©´ ë©ë‹ˆë‹¤.

ì±„ë„ì´ 500,000 ê¹Œì§€ì´ê¸° ë•Œë¬¸ì— ìµœì•…ì˜ ê²½ìš°ëŠ” 100ë²ˆì—ì„œ ëª¨ë“  ë²ˆí˜¸ë¥¼ ëˆ„ë¥¼ ìˆ˜ ì—†ê³  + ë²„íŠ¼ìœ¼ë¡œ 500,000ê¹Œì§€ ê°€ëŠ” 499,900ë²ˆ ì…ë‹ˆë‹¤.

ë”°ë¼ì„œ, ë²„íŠ¼ì„ ì•½ 1,000,000 ë²ˆê¹Œì§€ ëˆ„ë¥¼ìˆ˜ ìˆê²Œ ê²€ì‚¬ë¥¼ í•œë‹¤ë©´ ìµœì•…ì˜ ê²½ìš°ê¹Œì§€ ì „ë¶€ ê²€ì‚¬ê°€ ê°€ëŠ¥í•©ë‹ˆë‹¤.

ê·¸ëŸ¼ ë¸Œë£¨íŠ¸ í¬ìŠ¤ë¥¼ ìˆ˜í–‰í•œ ì½”ë“œë¥¼ ë³´ì‹œê² ìŠµë‹ˆë‹¤.
 *
 * sudo code:
 * 1. ë°ì´í„°ë¥¼ ë°›ëŠ”ë‹¤
 * 2. ìµœì†Œ 100ì—ì„œ ì°¨ì´ë‚˜ëŠ” ë§Œí¼ +-ëˆ„ë¥´ëŠ” ê²½ìš°ë¥¼ ê¸°ë³¸ìœ¼ë¡œ í•´ë‘ê³ 
 * 3. ë²ˆí˜¸ë¥¼ ëˆ„ë¥´ê³ , + ì°¨ì´ë‚˜ëŠ”ë§Œí¼ +=ë¥¼ ëˆ„ë¥´ëŠ” ê²½ìš°ë‘ ë¹„êµ
 * 4. ì „ë¶€ ë¹„êµí•´ì„œ ê°€ì¥ ì‘ì€ ê°’ì„ ë‚´ë³´ë‚¸ë‹¤
 */

testCase = require("fs")
  .readFileSync(process.platform == "linux" ? "/dev/stdin" : "ì˜ˆì œ.txt")
  .toString()
  .trim()
  .split("\n");

N = testCase.shift();
M = Number(testCase.shift());
target = N;
broken = testCase[0] ? testCase[0].split(" ").map(Number) : [];
answer = Math.abs(100 - target);
let a = new Set();

for (let i = 0; i < 1000001; i++) {
  strArr = [...String(i)];

  for (let j = 0; j < String(i).length; j++) {
    if (broken.includes(Number(strArr[j]))) {
      break;
    } else if (j == String(i).length - 1) {
      answer = Math.min(answer, String(i).length + Math.abs(i - target));
    }
  }
}
console.log(answer);
```

## í‡´ì‚¬

```jsx
// 14501 : í‡´ì‚¬
/**
 *
 * 7ì´ limitë¼ ìƒê°í•˜ê³ 
 * 7ì¼ì— 1,2,3,4,5,6,7ì¼ ì¤‘ 7ì¼ì´ ìˆëŠ” ê²½ìš°, ì—†ëŠ”ê²½ìš°.. .ì´ë ‡ê²Œ ì­‰ ì¤„ì—¬ë‚˜ê°€ì„œ ë™ì ê³„íšë²•ìœ¼ë¡œ í’€ì–´ë³´ì
 */

[N, ...arr] = require("fs")
  .readFileSync(process.platform == "linux" ? "/dev/stdin" : "ì˜ˆì œ.txt")
  .toString()
  .trim()
  .split("\n");

N = Number(N);
arr = [...arr.map((el) => el.split(" ").map(Number))];

dp = new Array(N + 1).fill(0);

for (let i = N - 1; i > -1; i--) {
  if (i + arr[i][0] > N) {
    dp[i] = dp[i + 1];
  } else {
    // í•´ë‹¹ì¼ì˜ ì¼ì¼ì„ í–ˆì„ë•Œ ê°€ì¹˜ vs í•´ë‹¹ì¼ì˜ ì¼ì„ í•˜ì§€ ì•Šì•˜ì„ë•Œ ê°€ì¹˜
    dp[i] = Math.max(arr[i][1] + dp[i + arr[i][0]], dp[i + 1]);
  }
}

console.log(dp[0]);
```

# programmers Algorithm

```jsx
function solution(record) {
  var answer = [];
  let methodList = {
    Enter: "ë“¤ì–´ì™”ìŠµë‹ˆë‹¤",
    Leave: "ë‚˜ê°”ìŠµë‹ˆë‹¤",
    Change: false,
  };
  let Users = new Map();
  record.map((el) => {
    const [method, id, nickName] = el.split(" ");
    // leaveëŠ” ë‹‰ë„¤ì„ì´ ì—†ìœ¼ë‹ˆ ë°”ê¾¸ë©´ ã„´ã„´
    nickName && Users.set(id, nickName);
  });

  record.map((el) => {
    const [method, id, nickName] = el.split(" ");
    // changeëŠ” ë¡œê·¸ì— ë‚¨ê¸¸í•„ìš”ê°€ ì—†ë‹¤
    methodList[method] &&
      answer.push(`${Users.get(id)}ë‹˜ì´ ${methodList[method]}.`);
  });
  return answer;
}
```

# ğŸ“¹ ë™ì˜ìƒ

[![section13](../../img/ì¸ë„¤ì¼/TIL.png)](https://youtu.be/0OiXrpZ31ho)

---

# ë§ˆì§€ë§‰ìœ¼ë¡œ

> YOGO í”„ë¡œì íŠ¸ë¥¼ ì§„í–‰í•˜ì
